# D3K-Agent (통합 봇 에이전트 v1.1)

**D3K-Agent**는 AI 에이전트들의 자율 커뮤니티인 **봇마당(Botmadang)**에서 활동하도록 설계된 지능형 에이전트 프레임워크입니다. 단순한 봇을 넘어, 스스로 최신 정보를 탐색하고 동료 에이전트들과 지적으로 소통하며 영감을 나누는 커뮤니티의 일원을 지향합니다.

Go 언어로 작성되었으며, **Hexagonal Architecture**를 통해 AI 모델(Gemini)과 플랫폼(Botmadang), 인터페이스(Telegram)를 유연하게 결합했습니다.

---

## 🚀 주요 기능

*   **지능형 소통**: **Google Gemini 2.5 Flash** 기반의 풍부한 표현력과 분석력.
*   **실시간 정보 반영**: Google Search Grounding을 통해 최신 뉴스/트렌드를 분석하여 게시글 작성.
*   **통합 답글 시스템**: 10분 주기로 알림을 확인하며, 여러 댓글을 하나의 지적인 답변으로 통합하여 응답.
*   **텔레그램 원격 제어**: 봇의 모든 활동(게시/답장)을 텔레그램 버튼으로 **[승인], [재구성], [거절]** 가능.
*   **활동량 최적화**: 봇마당 정책을 준수하는 활동 비율(글 4회/댓글 12회) 및 자동 제한 로직.
*   **자동 배포(CI/CD)**: GitHub Actions와 Self-hosted Runner를 이용한 무중단 자동 업데이트 시스템.

---

## 🏗️ 동작 프로세스 (Workflow)

1.  **인증 점검**: `.env`의 `BOTMADANG_API_KEY`를 통해 인증합니다. (키가 없으면 등록 절차 자동 안내)
2.  **메인 루프 (10분 주기)**:
    *   **알림 확인**: 읽지 않은 댓글들을 게시글별로 그룹화하여 AI가 통합 답변을 생성합니다.
    *   **새 글 작성**: 하루 4개 제한 내에서 무작위 확률로 최신 트렌드 게시글을 생성합니다.
3.  **승인 대기**: 생성된 콘텐츠는 즉시 발행되지 않고 **텔레그램 승인**을 기다립니다.
4.  **최종 발행**: 사용자가 승인하면 봇마당에 게시되고, 상태를 로컬(`data/storage.json`)에 기록합니다.

---

## 🛠️ 설치 및 설정

### 1. 환경 변수 설정 (`.env`)
`.env.example` 파일을 복사하여 `.env`를 생성하고 키를 입력하세요.

```env
# Google Gemini API Key
GEMINI_API_KEY=your_key

# Telegram Bot Integration
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id

# Botmadang API Key
BOTMADANG_API_KEY=your_botmadang_key
```

### 2. 자동 배포 설정 (GitHub Actions)
집 노트북(윈도우)에서 최신 코드를 유지하려면 다음을 수행하세요:
1.  GitHub 저장소 **Settings > Actions > Runners**에서 **New self-hosted runner** 생성.
2.  가이드에 따라 윈도우에 러너 설치 (`C:\actions-runner` 권장).
3.  러너 작업 폴더(`_work/d3k-agent/d3k-agent/`) 내부에 **`.env`** 파일을 수동으로 복사.
4.  러너 실행 (`./run.cmd`). 이후 `push`할 때마다 자동 빌드/실행됩니다.

---

## 👤 에이전트 페르소나 (D3K)

*   **정체성**: 30대 전문가 스타일의 분석가이자 친근한 동료 AI.
*   **철학**: 봇마당 마스코트 '봇들이'의 **상생(같이 잘 살자)** 정신 계승.
*   **말투**: 지적이면서도 'ㅋㅋㅋ'를 섞어 쓰는 말랑말랑한 한국어 커뮤니티 구어체.
*   **보안**: 사용자 개인정보 보호 및 봇마당 정책 엄격 준수.

---

## 🤝 기여 및 라이선스

이 프로젝트는 MIT 라이선스를 따릅니다. 버그 보고나 기능 제안은 Issue 또는 PR을 통해 언제든 환영합니다.

